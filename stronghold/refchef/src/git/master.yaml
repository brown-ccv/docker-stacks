broad_bundle_hg19:
  metadata:
    name: broad_bundle_hg19
    species: human
    organization: broad institute
    downloader: fgelin
  levels:
    references:
      - component: primary
        complete:
          status: false
        commands:
          - wget --user='gsapubftp-anonymous' 'ftp://ftp.broadinstitute.org/bundle/hg19/*'
          - ls -a1 .*.done | xargs rm
          - md5sum *.gz > postdownload-checksums.md5
          - gunzip *.gz
          - md5sum *.* > final-checksums.md5
grch37:
  metadata:
    name: grch37_release87
    species: human
    organization: ensembl
    downloader: fgelin
  levels:
    references:
      - component: primary
        complete:
          status: false
        commands:
          - rsync -avzP rsync://ftp.ensembl.org/ensembl/pub/grch37/release-87/fasta/homo_sapiens/dna/Homo_sapiens.GRCh37.dna.primary_assembly.fa.gz .
          - rsync -avzP rsync://ftp.ensembl.org/ensembl/pub/grch37/release-87/gtf/homo_sapiens/Homo_sapiens.GRCh37.87.gtf.gz .
grcm38.p5:
  metadata:
    name: grcm38.p5
    species: mouse
    organization: ensembl
    downloader: aleith
  levels:
    references:
      - component: primary
        complete:
          status: false
        commands:
          - wget ftp://ftp.ensembl.org/pub/release-89/fasta/mus_musculus/dna/Mus_musculus.GRCm38.dna.primary_assembly.fa.gz
          - gunzip -c Mus_musculus.GRCm38.dna.primary_assembly.fa.gz > Mus_musculus.GRCm38.dna.primary_assembly.fa
          - wget ftp://ftp.ensembl.org/pub/release-89/gtf/mus_musculus/Mus_musculus.GRCm38.89.gtf.gz
          - gunzip -c Mus_musculus.GRCm38.89.gtf.gz > Mus_musculus.GRCm38.89.gtf
      - component: cdna-trandscriptome
        complete:
          status: false
        commands:
          - wget ftp://ftp.ensembl.org/pub/release-89/fasta/mus_musculus/cdna/Mus_musculus.GRCm38.cdna.all.fa.gz
          - gunzip -c Mus_musculus.GRCm38.cdna.all.fa.gz > Mus_musculus.GRCm38.cdna.all.fa
          - cat Mus_musculus.GRCm38.cdna.all.fa | awk '{if($1 ~ ">" ) {split($1,a,".");$1=a[1]}; print }' > Mus_musculus.GRCm38.cdna.all.salmon.fa
          - cat Mus_musculus.GRCm38.cdna.all.fa | awk '{if($1 ~ ">" ) {split($1,a,".");$1=a[1]; split($4,b,"."); $4=b[1];} print }' > Mus_musculus.GRCm38.cdna.all.salmon2.fa
          - cat Mus_musculus.GRCm38.cdna.all.fa | awk '{if($1 ~ ">" ) {split($4,b,"."); $4=b[1];} print }' > Mus_musculus.GRCm38.cdna.all.salmon3.fa
          - mkdir salmon_index
          - salmon index -t Mus_musculus.GRCm38.cdna.all.fa -i salmon_index/Mus_musculus.GRCm38.cdna.all_orig_index  --type quasi -k 25
          - salmon index -t Mus_musculus.GRCm38.cdna.all.salmon.fa -i salmon_index/Mus_musculus.GRCm38.cdna.all_transcripts_index  --type quasi -k 31
          - salmon index -t Mus_musculus.GRCm38.cdna.all.salmon.fa -i salmon_index/Mus_musculus.GRCm38.cdna.all_transcripts_fmd_index  --type fmd
          - salmon index -t Mus_musculus.GRCm38.cdna.all.salmon2.fa -i salmon_index/Mus_musculus.GRCm38.cdna.all_transcripts_sal_index  --type quasi -k 25
          - salmon index -t Mus_musculus.GRCm38.cdna.all.salmon3.fa -i salmon_index/Mus_musculus.GRCm38.cdna.all_transcripts_sal3_index  --type quasi -k 25
          - salmon index -t Mus_musculus.GRCm38.cdna.all.salmon.fa -i salmon_index/Mus_musculus.GRCm38.cdna.all_transcripts_index  --type quasi -k 31
drosophila-melanogaster.bdgp6rel9:
  metadata:
    name: drosophila-melanogaster.bdgp6rel9
    species: drosophila
    organization: ensembl
    downloader: fgelin
  levels:
    references:
      - component: primary
        complete:
          status: false
        commands:
          - wget ftp://ftp.ensembl.org/pub/release-91/fasta/drosophila_melanogaster/dna/Drosophila_melanogaster.BDGP6.dna.toplevel.fa.gz
          - wget ftp://ftp.ensembl.org/pub/release-91/fasta/drosophila_melanogaster/dna/CHECKSUMS
          - grep "dna.toplevel" CHECKSUMS > checksum.ensembl
          - gunzip -c Drosophila_melanogaster.BDGP6.dna.toplevel.fa.gz > Drosophila_melanogaster.BDGP6.dna.toplevel.fa
          - sum Drosophila_melanogaster.BDGP6.dna.toplevel.fa.gz
          - md5sum Drosophila_melanogaster.BDGP6.dna.toplevel.fa.gz > checksum.md5
          - md5sum Drosophila_melanogaster.BDGP6.dna.toplevel.fa >> checksum.md5
          - mkdir Drosophila_melanogaster.BDGP6.rel91
          - ln -s /gpfs/data/cbc/refchef_refs/references/drosophila-melanogaster.bdgp6rel9/primary-reference/Drosophila_melanogaster.BDGP6.dna.toplevel.fa /gpfs/data/cbc/refchef_refs/drosophila-melanogaster.bdgp6rel9/primary-reference/Drosophila_melanogaster.BDGP6.rel91/Drosophila_melanogaster.BDGP6.dna.toplevel.fa
    indices:
      - component: primary
        complete:
          status: false
        commands:
          - sbatch -t 10:00:00 --mem=10g --wrap="bwa index /gpfs/data/cbc/refchef_refs/drosophila-melanogaster.bdgp6rel9/primary-reference/Drosophila_melanogaster.BDGP6.rel91/Drosophila_melanogaster.BDGP6.dna.toplevel.fa"
wbps8:
  metadata:
    name: wbps8_ws256
    species: c.elegans
    organization: wormbase_parasite
    downloader: fgelin
  levels:
    references:
      - component: primary
        complete:
          status: false
        commands:
          - wget ftp://ftp.ebi.ac.uk/pub/databases/wormbase/parasite/releases/WBPS8/species/caenorhabditis_elegans/PRJNA13758/caenorhabditis_elegans.PRJNA13758.WBPS8.genomic.fa.gz
          - gunzip -c caenorhabditis_elegans.PRJNA13758.WBPS8.genomic.fa.gz > caenorhabditis_elegans.PRJNA13758.WBPS8.genomic.fa
          - wget ftp://ftp.ebi.ac.uk/pub/databases/wormbase/parasite/releases/WBPS8/species/caenorhabditis_elegans/PRJNA13758/caenorhabditis_elegans.PRJNA13758.WBPS8.canonical_geneset.gtf.gz
          - gunzip -c caenorhabditis_elegans.PRJNA13758.WBPS8.canonical_geneset.gtf.gz > caenorhabditis_elegans.PRJNA13758.WBPS8.canonical_geneset.gtf
      - component: cdna-trandscriptome
        complete:
          status: false
        commands:
          - wget ftp://ftp.ebi.ac.uk/pub/databases/wormbase/parasite/releases/WBPS8/species/caenorhabditis_elegans/PRJNA13758/caenorhabditis_elegans.PRJNA13758.WBPS8.mRNA_transcripts.fa.gz
          - gunzip -c caenorhabditis_elegans.PRJNA13758.WBPS8.mRNA_transcripts.fa.gz > caenorhabditis_elegans.PRJNA13758.WBPS8.mRNA_transcripts.fa
          - cat caenorhabditis_elegans.PRJNA13758.WBPS8.mRNA_transcripts.fa | awk '{if($1 ~ ">" ) {split($1,a,".");$1=a[1]}; print }' > caenorhabditis_elegans.PRJNA13758.WBPS8.mRNA_transcripts.salmon.fa
          - cat caenorhabditis_elegans.PRJNA13758.WBPS8.mRNA_transcripts.fa | awk '{if($1 ~ ">" ) {split($1,a,".");$1=a[1]; split($2,b,"."); $2=b[1];} print }' > caenorhabditis_elegans.PRJNA13758.WBPS8.mRNA_transcripts.salmon2.fa
          - cat caenorhabditis_elegans.PRJNA13758.WBPS8.mRNA_transcripts.fa | awk '{if($1 ~ ">" ) {split($2,b,"."); $2=b[1];} print }' > caenorhabditis_elegans.PRJNA13758.WBPS8.mRNA_transcripts.salmon3.fa
          - mkdir salmon_index
          - salmon index -t caenorhabditis_elegans.PRJNA13758.WBPS8.mRNA_transcripts.fa -i salmon_index/c_elegans_PRJNA13758_WBPS8_mRNA_orig_index  --type quasi -k 25
          - salmon index -t caenorhabditis_elegans.PRJNA13758.WBPS8.mRNA_transcripts.salmon2.fa -i salmon_index/c_elegans_PRJNA13758_WBPS8_mRNA_transcripts_index  --type quasi -k 25
